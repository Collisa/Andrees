{% extends 'base.html' %}
{% import 'macros/navbar.html' as nav %}
{% from 'macros/del.html' import del as del %}


{% block title %}Upload{% endblock title %}



{% block body %}

  {{ nav.navbar(href='home', button_text='Home', href_2='thema', button_text_2="Thema's", bg_color='bg-teal-800') }}


    {% block content %}
      
      <div class="pt-24 mx-auto"> 
        <div class="text-center">
          <h2 class="text-3xl tracking-tight font-extrabold text-gray-900 sm:text-4xl">
            Upload je foto's hier:
          </h2>

          <form action="{{ url_for('uploading') }}" method="POST" enctype=multipart/form-data>
            <div class="w-2/3 mt-7 bg-gray-300 mx-auto flex items-center justify-center flex-col space-y-12 pb-8">
              {{ form.csrf_token }}

              
              {{ form.image(class="w-full py-12 border-dashed border-4 border-gray-600") }}
              
              <div class="flex flex-row space-x-8">
                <div class="flex flex-col">
                  {{ form.description.label }}
                  {{ form.description }}
                </div>
                <div class="text-left">
                  <div>
                    {{ form.theme.label }}
                    {{ form.theme }}
                  </div>
                  {{ form.position }}
                </div>
              </div>
              {{ form.submit(class="p-2 rounded bg-teal-100 hover:bg-teal-500 hover:text-white") }}

              
              
            </div>
          </form>

        </div>
      </div>
      



      <table class="table-auto w-11/12 mx-auto mt-6 rounded-lg overflow-hidden shadow-xl">
        <thead class="bg-teal-700 text-white uppercase tracking-wider">
          <th class="py-2 font-semibold">Thumbnail</th>
          <th class="py-2 font-semibold">Naam</th>
          <th class="py-2 font-semibold">Thema</th>
          <th class="py-2 font-semibold">Plaats</th>
          <th class="py-2 font-semibold">Verwijder</th>
        </thead>
        <tbody class="text-center text-gray-700">
          {% for img in all_img %}
          <tr class="odd:bg-teal-50">

         

            <td><img class="w-16 h-12 object-cover" src="{{ os.path.join(app.config['UPLOADED_PHOTOS_DEST'], img.filename)|resize('128x96', format='jpg', fill=1) }}" alt=""></td>


            <td class="py-2">{{ img.filename }}</td>
            <td>{{ img.theme }}</td>

            {% if img.position == 'Thema: Cover' %}
              <td>cover</td>
            {% elif img.position == 'Thema: kleine foto' %}
              <td>klein</td>
            {% elif img.position == 'Geen geschikt formaat' %}
              <td>/</td>  
            {% endif %}


            
            <td class=""><a class="flex justify-center items-center" href="{{ url_for('delete', id=img.id) }}">{{ del() }}</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>



    {% endblock content %}


{% endblock body %}